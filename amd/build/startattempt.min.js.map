{"version":3,"file":"startattempt.min.js","sources":["../src/startattempt.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have recZeived a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * @module quizaccess_sentry/startattempt\n * @copyright 2022, Riasat Mahbub <riasat.mahbub@brainstation-23.com>\n * @license   http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n\nimport Ajax from 'core/ajax';\n\nconst log_sus_event = (event_type, props, timecaught) => {\n\n    let wsfunction = 'quizaccess_sentry_log_sus_event';\n    let params = {\n        'event_type': event_type,\n        'userid': props.userid,\n        'courseid': props.courseid,\n        'quizid': props.quizid,\n        'timecaught': timecaught\n    };\n\n    let request = {\n        methodname: wsfunction,\n        args: params\n    };\n    Ajax.call([request])[0].done(function () {\n    }).fail(Notification.exception);\n};\n\nexport const setup = (props) => {\n\n    window.addEventListener(\"visibilitychange\", () => {\n        if (document.hidden) {\n            log_sus_event('Tab switched', props, Date.now());\n        }\n    });\n\n    window.addEventListener('resize', () => {\n        log_sus_event('Resized', props, Date.now());\n    });\n\n    window.addEventListener('keydown', (event) => {\n        if (event.key === \"F12\") {\n            log_sus_event('Pressed F12', props, Date.now());\n        }\n    });\n\n    window.addEventListener('copy', (event) => {\n        const selection = window.getSelection();\n        log_sus_event('Copied Text '+ selection, props, Date.now());\n        event.preventDefault();\n    });\n\n};"],"names":["log_sus_event","event_type","props","timecaught","request","methodname","args","userid","courseid","quizid","call","done","fail","Notification","exception","window","addEventListener","document","hidden","Date","now","event","key","selection","getSelection","preventDefault"],"mappings":";;;;;2IAuBMA,cAAgB,SAACC,WAAYC,MAAOC,gBAWlCC,QAAU,CACVC,WAVa,kCAWbC,KAVS,YACKL,kBACJC,MAAMK,gBACJL,MAAMM,gBACRN,MAAMO,kBACFN,2BAObO,KAAK,CAACN,UAAU,GAAGO,MAAK,eAC1BC,KAAKC,aAAaC,2BAGJ,SAACZ,OAElBa,OAAOC,iBAAiB,oBAAoB,WACpCC,SAASC,QACTlB,cAAc,eAAgBE,MAAOiB,KAAKC,UAIlDL,OAAOC,iBAAiB,UAAU,WAC9BhB,cAAc,UAAWE,MAAOiB,KAAKC,UAGzCL,OAAOC,iBAAiB,WAAW,SAACK,OACd,QAAdA,MAAMC,KACNtB,cAAc,cAAeE,MAAOiB,KAAKC,UAIjDL,OAAOC,iBAAiB,QAAQ,SAACK,WACvBE,UAAYR,OAAOS,eACzBxB,cAAc,eAAgBuB,UAAWrB,MAAOiB,KAAKC,OACrDC,MAAMI"}